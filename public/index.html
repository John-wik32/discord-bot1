<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Video Sender Dashboard</title>

<!-- FIX CSP (ALLOW OLD INLINE STYLE + SCRIPT) -->
<meta http-equiv="Content-Security-Policy"
content="
default-src 'self';
script-src 'self' 'unsafe-inline' 'unsafe-eval';
style-src 'self' 'unsafe-inline';
connect-src 'self';
">

<style>
body {
  background:#0b1220;
  color:white;
  font-family:Arial;
}
button {
  padding:10px;
  margin:5px;
}
.panel {
  display:none;
}
.panel.active {
  display:block;
}
</style>
</head>

<body>

<h1>ðŸŽ¬ Discord Video Sender</h1>

<div id="loginPanel" class="panel active">
  <h2>Dashboard Login</h2>
  <input id="pass" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
  <p id="loginMsg"></p>
</div>

<div id="dashboard" class="panel">
  <button onclick="switchPage('send')">Send</button>
  <button onclick="switchPage('schedule')">Schedule</button>

  <div id="send" class="panel active">
    <h3>Send Video</h3>
    <p>Bot-only sending (no uploads folder)</p>
  </div>

  <div id="schedule" class="panel">
    <h3>Schedule</h3>
    <p>Coming soon</p>
  </div>
</div>

<script>
let dashboardPass = "";

function login() {
  dashboardPass = document.getElementById("pass").value;
  fetch("/login", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ password: dashboardPass })
  })
  .then(r => r.json())
  .then(d => {
    if (d.success) {
      document.getElementById("loginPanel").classList.remove("active");
      document.getElementById("dashboard").classList.add("active");
    } else {
      document.getElementById("loginMsg").innerText = "Wrong password";
    }
  });
}

function switchPage(id) {
  document.querySelectorAll(".panel").forEach(p => p.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}
</script>

</body>
</html>
